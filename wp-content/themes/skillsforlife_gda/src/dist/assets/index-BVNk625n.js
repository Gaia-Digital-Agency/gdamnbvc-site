import{g as p,a as S,e as y,S as w}from"./swiper-core-BWsPD-mm.js";import{C as b}from"./choices-PN3yYAsG.js";function L(l){let{swiper:e,extendParams:f,emit:i,on:n}=l,o=!1;const u=p(),c=S();f({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(s,d){if(e.virtual&&e.params.virtual.enabled){const r=e.slides.find(m=>m.getAttribute("data-hash")===d);return r?parseInt(r.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(y(e.slidesEl,`.${e.params.slideClass}[data-hash="${d}"], swiper-slide[data-hash="${d}"]`)[0])}}});const g=()=>{i("hashChange");const s=u.location.hash.replace("#",""),d=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],r=d?d.getAttribute("data-hash"):"";if(s!==r){const t=e.params.hashNavigation.getSlideIndex(e,s);if(typeof t>"u"||Number.isNaN(t))return;e.slideTo(t)}},v=()=>{if(!o||!e.params.hashNavigation.enabled)return;const s=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],d=s?s.getAttribute("data-hash")||s.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&c.history&&c.history.replaceState?(c.history.replaceState(null,null,`#${d}`||""),i("hashSet")):(u.location.hash=d||"",i("hashSet"))},a=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;o=!0;const s=u.location.hash.replace("#","");if(s){const r=e.params.hashNavigation.getSlideIndex(e,s);e.slideTo(r||0,0,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&c.addEventListener("hashchange",g)},h=()=>{e.params.hashNavigation.watchState&&c.removeEventListener("hashchange",g)};n("init",()=>{e.params.hashNavigation.enabled&&a()}),n("destroy",()=>{e.params.hashNavigation.enabled&&h()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{o&&v()}),n("slideChange",()=>{o&&e.params.cssMode&&v()})}const q=l=>{const e=l.querySelector(".filter-wrapper"),f=l.querySelector(".swiper"),i=new w(f,{slidesPerView:1,allowTouchMove:!1,modules:[L],hashNavigation:!0,init:!1,spaceBetween:20,autoHeight:!0,observer:!0,observeSlideChildren:!0}),n=l.querySelectorAll(".tabs-button-wrapper .tabs-button"),o=()=>{n.forEach(a=>{a.classList.remove("active")})},u=a=>{[v,g,c].forEach(h=>h(a))},c=()=>{const a=l.querySelector(`.tabs-button-wrapper [data-hash="${window.location.hash.replace("#","")}"]`);a&&(o(),a.classList.add("active"),window.addEventListener("load",()=>{window.scrollTo(0,Math.max(a.getBoundingClientRect().top,0))}))},g=()=>{const a=()=>{i.wrapperEl.style.height="auto"};window.addEventListener("resize",a),window.addEventListener("load",a),a()},v=a=>{if(!e)return;const s=a.slides[a.activeIndex].querySelector(".block-gallery-full");if(!s){e.classList.add("hidden");return}e.classList.remove("hidden");const d=()=>{const r=[{value:"all",label:"All"}];if(s.querySelector(".image-gallery")){const t=s.querySelector(".image-gallery.multi")?"Pictures":"Picture";r.push({value:"picture",label:t})}if(s.querySelector(".video-gallery")){const t=s.querySelector(".video-gallery.multi")?"Videos":"Video";r.push({value:"video",label:t})}return r};new b(e.querySelector("select"),{choices:d(),searchEnabled:!1,itemSelectText:""}),e.querySelector("select").addEventListener("change",r=>{r.target.value=="picture"&&(l.classList.add("filter-selected"),l.classList.add("image-filter"),l.classList.remove("video-filter"),i.el.querySelectorAll(".image-gallery").forEach(t=>{t.classList.remove("hidden")}),i.el.querySelectorAll(".video-gallery").forEach(t=>{t.classList.add("hidden")})),r.target.value=="video"&&(l.classList.add("filter-selected"),l.classList.add("video-filter"),l.classList.remove("image-filter"),i.el.querySelectorAll(".video-gallery").forEach(t=>{t.classList.remove("hidden")}),i.el.querySelectorAll(".image-gallery").forEach(t=>{t.classList.add("hidden")})),r.target.value=="all"&&(l.classList.remove("filter-selected"),l.classList.remove("video-filter"),l.classList.remove("image-filter"),i.el.querySelectorAll(".video-gallery").forEach(t=>{t.classList.remove("hidden")}),i.el.querySelectorAll(".image-gallery").forEach(t=>{t.classList.remove("hidden")}))})};i.on("init",u),i.init(),n.forEach(a=>{const h=parseInt(a.dataset.index);a.addEventListener("click",()=>{i.activeIndex!=h&&(o(),a.classList.add("active"),i.slideTo(h))})}),i.on("slideChange",v)};export{q as initTabContent};
